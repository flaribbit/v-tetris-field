import{d as _,o as f,c,r as C,a as h,b as L,w as F,e as P,f as v,g as i,h as g,i as p,t as B,F as E,j as S,u as $,k as T}from"./vendor.bda5396c.js";const O=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}};O();const m=_({emits:["click"],setup(a,{emit:n}){return(r,l)=>(f(),c("button",{class:"vt-btn",onClick:l[0]||(l[0]=e=>n("click"))},[C(r.$slots,"default")]))}});const w=_({props:{page:{type:Object,default:null},height:{type:Number,default:20}},setup(a){const n=a,r={T:["#b451ac","#e56add"],I:["#41afde","#43d3ff"],O:["#f7d33e","#fff952"],L:["#ef9535","#ffbf60"],J:["#1983bf","#1ba6f9"],S:["#66c65c","#88ee86"],Z:["#ef624d","#ff9484"],X:["#686868","#949494"],_:["#686868","#949494"]};var l=null;const e=h();function s(t,u){const N=u.field,A=n.height-1;for(var o=0;o<20;o++)for(var d=0;d<10;d++){var y=N.at(d,o);y!="_"&&(t.fillStyle=r[y][0],t.fillRect(d*20,(A-o)*20,20,20),t.fillStyle=r[y][1],t.fillRect(d*20,(A-o)*20,20,-4))}if(!u.operation)return;const k=u.mino(),b=k.positions();t.lineWidth=2,t.lineJoin="round",t.strokeStyle=r[k.type][0];for(var o=0;o<4;o++)t.strokeRect(b[o].x*20+2,(A-b[o].y)*20+2,16,16)}return L(()=>{!e.value||(e.value.width=10*20,e.value.height=n.height*20,l=e.value.getContext("2d"),!!l&&s(l,n.page))}),F(n,()=>{!l||(l.canvas.height=n.height*20,l.clearRect(0,0,l.canvas.width,l.canvas.height),s(l,n.page))}),(t,u)=>(f(),c("canvas",{class:"vt-field",ref_key:"canvas",ref:e},null,512))}});const V={class:"fumen-ctl"},x=p("|<"),z=p("<"),Q=p(">"),R=p(">|"),U=_({props:{fumen:{type:String,default:"v115@vhAAgH"},page:{type:Number,default:0},height:{type:Number,default:20}},setup(a){const n=a,r=h(P.decode(n.fumen)),l=h(n.page),e=s=>{s<0||s>=r.value.length||(l.value=s)};return(s,t)=>(f(),c(E,null,[v("div",null,[i(w,{page:r.value[l.value],height:n.height},null,8,["page","height"])]),v("div",V,[i(m,{onClick:t[0]||(t[0]=u=>e(0))},{default:g(()=>[x]),_:1}),i(m,{onClick:t[1]||(t[1]=u=>e(l.value-1))},{default:g(()=>[z]),_:1}),i(m,{onClick:t[2]||(t[2]=u=>e(l.value+1))},{default:g(()=>[Q]),_:1}),i(m,{onClick:t[3]||(t[3]=u=>e(r.value.length-1))},{default:g(()=>[R]),_:1}),p(" "+B(l.value+1),1)])],64))}});const X={class:"fumen-list"},D={class:"fumen-item"},q=_({props:{fumen:{type:String,default:"v115@vhAAgH"},height:{type:Number,default:20}},setup(a){const n=a,r=h(P.decode(n.fumen));return(l,e)=>(f(),c("div",X,[(f(!0),c(E,null,S(r.value,(s,t)=>(f(),c("div",D,[i(w,{page:s,height:n.height},null,8,["page","height"]),v("div",null,"("+B(t+1)+") "+B(s.comment),1)]))),256))]))}});const J=v("h2",null,"TFumenPlayer",-1),W=v("h2",null,"TFumenList",-1),H=_({setup(a){var n="v115@vhPJHYaAkeEfEXoC+BlvlzByEEfE03k2AlP5ABwfAA?A+rQAAqsBsqBvtBTpBVhQeAlvlzByEEfE03k2AlP5ABwvDf?E33ZBBlfbOBV5AAAOfQeAlvlzByEEfE03+2BlP5ABwvDfEV?5k2AlPJVBjzAAA6WQAAzdBpeB0XBXUBFlQnAlvlzByEEfE0?3+2BlP5ABwvDfEXhWEBUYPNBkkuRA1GCLBUupAAdqQnAlvl?zByEEfE038UBlP5ABwvDfEXhWEBUYPNBkkuRA1GCLBU+rAA?AAPAA";return location.search.length>0&&(n=location.search.substring(1)),(r,l)=>(f(),c(E,null,[J,i(U,{fumen:$(n),page:0},null,8,["fumen"]),W,i(q,{fumen:$(n),height:10},null,8,["fumen"])],64))}});T(H).mount("#app");
